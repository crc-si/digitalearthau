


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started With Landsat Data &mdash; Digital Earth Australia 1.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/dea-favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="View Landsat 8 Imagery with PQ mask" href="Landsats5-7-8-PQ.html" />
    <link rel="prev" title="Getting started with the Intertidal Extents Relative Model and ITEM Confidence (ITEM v2.0)" href="GettingStartedWithITEM.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/DEA-logo-light.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/changelog.html">DEA NCI Environment Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Connect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connect/account.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/install.html">Installation and Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/nci_basics.html">Command Line Usage (Advanced)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connect/jupyter.html">Jupyter Notebooks Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../query/Getting Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/List Products.html">List Products &amp; Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/Loading Data.html">Loading data from the datacube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../query/Advanced Querying.html">Advanced Querying</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Getting_started/README.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="README.html">DEA Datasets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="GettingStartedWithITEM.html">Getting started with the Intertidal Extents Relative Model and ITEM Confidence (ITEM v2.0)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting Started With Landsat Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Retrieve-and-plot-the-data-from-Landsats-5,-7-and-8">Retrieve and plot the data from Landsats 5, 7 and 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#How-to-retrieve-and-plot-the-data">How to retrieve and plot the data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Landsats5-7-8-PQ.html">View Landsat 8 Imagery with PQ mask</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Integrating_external_data/README.html">Integrating External Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Index_calculation/README.html">Index Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Temporal_analysis/README.html">Temporal Analyses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Composite_generation/README.html">Composite Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Image_classification/README.html">Image Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Outputting_data/README.html">Outputting data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Workflows/README.html">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Scripts/README.html">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../README.html">About this documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../README.html#notebook-gallery-instructions">Notebook Gallery Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tags.html">Tagging Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Data Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data.html">Surface Reflectance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../internal/new_product.html">Creating a New Product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/git_best_practice.html">Git Best Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/release.html">DEA Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/modules.html">DEA Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/other_modules.html">Other Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/orchestration.html">DEA Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/collection_management.html">Collection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/goalkeeper_instructions.html">What’s a Goalkeeper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internal/requirements_met.html">DEA Code Functionality Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Tags Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Digital Earth Australia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="README.html">DEA Datasets</a> &raquo;</li>
        
      <li>Getting Started With Landsat Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebooks/DEA_datasets/GettingStartedWithLandSats5-7-8.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Getting-Started-With-Landsat-Data">
<h1>Getting Started With Landsat Data<a class="headerlink" href="#Getting-Started-With-Landsat-Data" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Authors:</th>
<th class="head">Claire Krause, Arapaut Sivaprasad</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Created:</td>
<td>May 02, 2018</td>
</tr>
<tr class="row-odd"><td>Last edited:</td>
<td>May 11, 2018</td>
</tr>
</tbody>
</table>
<div class="section" id="Retrieve-and-plot-the-data-from-Landsats-5,-7-and-8">
<h2>Retrieve and plot the data from Landsats 5, 7 and 8<a class="headerlink" href="#Retrieve-and-plot-the-data-from-Landsats-5,-7-and-8" title="Permalink to this headline">¶</a></h2>
<p><strong>Background:</strong> Data from three Landsats (5,7 and 8) are available to
access within DEA. This document has a short description about these
satellites, scan line correction (SLC), data corrections (NBAR, NBAR-T),
data bands and products within datacube. The code snippets in this doc
will let you retrieve and plot the data for <strong>lsN_nbar_albers</strong> and
<strong>lsN_nbart_albers</strong>, where N is 5, 7 or 8 to denote the satellite.</p>
<p><strong>What does this document do?</strong></p>
<ul class="simple">
<li>Show how to open a datacube to retrieve the data for various time
points and geo-coordinates.</li>
<li>Explain the data corrections.</li>
<li>Plot a scene as true colour image.</li>
<li>Plot the same as false colour image.</li>
<li>Compare multiple scenes side-by-side.</li>
</ul>
<p><strong>How to use this document:</strong></p>
<p>A basic understanding of <em>any</em> programming language is desirable, so
that the code will make sense, but one doesn’t have to be an expert
Python programmer to manipulate the code to get and display the data.</p>
<p>This doc applies to the following Landsats and data correction methods:</p>
<ul class="simple">
<li>Landsat 5</li>
<li>Landsat 7</li>
<li>Landsat 8</li>
<li>NBAR</li>
<li>NBAR-T</li>
</ul>
<p>Given below are code snippets that you can execute to perform various
actions such as retrieve, display and plot the data. If you wish to
learn more about the code, as well as the satellites and how they
collect the data, please go to this
<a class="reference external" href="GettingStartedWithLandSats5-7-8_Long.ipynb">document</a>.</p>
<p>Tags: <span class="target" id="index-0"></span>Landsats 5,7,8, <span class="target" id="index-1"></span>products, <span class="target" id="index-2"></span>three_band_image, <span class="target" id="index-3"></span>three_band_image_subplots, <span class="target" id="index-4"></span>dc.list_products, <span class="target" id="index-5"></span>dc.load, <span class="target" id="index-6"></span>query, <span class="target" id="index-7"></span>beginner, <span class="target" id="index-8"></span>plot, <span class="target" id="index-9"></span>image, <span class="target" id="index-10"></span>Scan Line Corrector, <span class="target" id="index-11"></span>Data Corrections, <span class="target" id="index-12"></span>Sensor Bands, <span class="target" id="index-13"></span>Plot Multiple Images</p>
<div class="section" id="About-Landsats">
<h3>About Landsats<a class="headerlink" href="#About-Landsats" title="Permalink to this headline">¶</a></h3>
<p>Landsat represents the world’s longest continuously acquired collection
of space-based moderate-resolution land remote sensing data. Four
decades of imagery provides a unique resource for those who work in
agriculture, geology, forestry, regional planning, education, mapping,
and global change research. Landsat images are also invaluable for
emergency response and disaster relief.</p>
<div class="section" id="Landsat-Missions-TimeLine-[1]">
<h4>Landsat Missions TimeLine [<a class="reference external" href="https://landsat.usgs.gov/landsat-missions-timeline">1</a>]<a class="headerlink" href="#Landsat-Missions-TimeLine-[1]" title="Permalink to this headline">¶</a></h4>
<p>In the mid-1960s an ambitious effort to develop and launch the first
civilian Earth observation satellite was started. The goal was achieved
on July 23, 1972, with the launch of the Earth Resources Technology
Satellite (ERTS-1), which was later renamed Landsat 1. The launches of
Landsat 2, Landsat 3, and Landsat 4 followed in 1975, 1978, and 1982,
respectively.</p>
<p>When Landsat 5 was launched in 1984, no one could have predicted that
the satellite would continue to deliver high quality, global data of
Earth’s land surfaces for 28 years and 10 months until its retirement in
June, 2013. Landsat 6, however, failed to achieve orbit in 1993.</p>
<p>Landsat 7 was successfully launched in 1999 and, along with Landsat 8
launched in 2013, continues to provide daily global data. Landsat 9 is
planned to be launched in late 2020.</p>
<p>Given below is a timeline of the various Landsats.</p>
<div class="figure" id="id1">
<img alt="Fig 1. Timeline of the working lives of Landsats since 1972" src="../../_images/TimelineOnlyForWebRGB.jpg" />
<p class="caption"><span class="caption-text">Fig 1. Timeline of the working lives of Landsats since 1972</span></p>
</div>
</div>
</div>
<div class="section" id="Basic-details-about-the-Landsats-5-to-9">
<h3>Basic details about the Landsats 5 to 9<a class="headerlink" href="#Basic-details-about-the-Landsats-5-to-9" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="15%" />
<col width="10%" />
<col width="30%" />
<col width="9%" />
<col width="5%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Launch Date</th>
<th class="head">End Date</th>
<th class="head">Sensors</th>
<th class="head">Orbit</th>
<th class="head">Repeat Cycle</th>
<th class="head">Bands</th>
<th class="head">Data Rate</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Landsat_5</td>
<td>Mar 1, 1984</td>
<td>June 5, 2013</td>
<td>MSS, TM</td>
<td>Sun-synchronous, near-polar orbit at 705km</td>
<td>16 days</td>
<td>7</td>
<td>85 Mbps</td>
</tr>
<tr class="row-odd"><td>Landsat_6</td>
<td>Oct 5, 1993</td>
<td>(did not achieve orbit)</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Landsat_7</td>
<td>Apr 15, 1999</td>
<td>Current</td>
<td>ETM+</td>
<td>Sun-synchronous, near-polar orbit at 705km</td>
<td>16 days</td>
<td>8</td>
<td>150 Mbps</td>
</tr>
<tr class="row-odd"><td>Landsat_8</td>
<td>Feb 11, 2013</td>
<td>Current</td>
<td>OLI, TIRS</td>
<td>Sun-synchronous, near-polar orbit at 705km</td>
<td>16 days</td>
<td>11</td>
<td>260.92 and 384&nbsp;Mbps</td>
</tr>
<tr class="row-even"><td>Landsat_9</td>
<td>Dec, 2020</td>
<td>5 years from launch</td>
<td>OLI-2, TIRS-2</td>
<td>Sun-synchronous orbit at an altitude of 438 miles</td>
<td>16 days</td>
<td>11</td>
<td>384 Mbps</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="Scan-Line-Corrector-[2]">
<h3>Scan Line Corrector [<a class="reference external" href="https://landsat.usgs.gov/landsat-7-data-users-handbook-section-2">2</a>]<a class="headerlink" href="#Scan-Line-Corrector-[2]" title="Permalink to this headline">¶</a></h3>
<p>The Scan Line Corrector (SLC) is an electro-optical mechanism composed
of two parallel mirrors set at an angle on a shaft. The SLC is
positioned behind the primary optics and compensates for the along-track
motion of the spacecraft occurring during an active SMA cross-track
scan. As a result, a rectilinear scan pattern is produced using the SLC
instead of the zigzag pattern that would be produced without it.</p>
<div class="figure" id="id2">
<img alt="Figure 2. ETM+ scan line corrector (SLC) effect." src="../../_images/scan_line_corrector.jpg" />
<p class="caption"><span class="caption-text">Figure 2. ETM+ scan line corrector (SLC) effect.</span></p>
</div>
<p>The SLC failed for Landsat 7 on May 31, 2003. Without an operating SLC,
the ETM+ line of sight now traces a zig-zag pattern along the satellite
ground track (see the figure above) resulting in wedge shaped
scan-to-scan gaps (and alternating overlap areas) which increase in
magnitude away from nadir. Despite the SLC failure, Landsat 7 ETM+ is
still capable of acquiring useful image data with the SLC turned off
(SLC-off), particularly within the central portion of any given scene
(see the figure below). Various interpolation and compositing techniques
were investigated to expand the coverage of useful data.</p>
<div class="figure" id="id3">
<img alt="Figure 3. Scan line corrected image." src="../../_images/scan_line_corrected_image.jpg" />
<p class="caption"><span class="caption-text">Figure 3. Scan line corrected image.</span></p>
</div>
<p>The top image shows a subset of an SLC-on scene. The middle, a scene
from the same area after the SLC failed. The bottom image shows the
middle image, after the SLC gaps were largely filled by interpolation.</p>
<p>The data we have in datacube is NOT interpolated and, hence, it will
show the stripes in all the “ls7” products.</p>
</div>
<div class="section" id="About-data-corrections">
<h3>About data corrections<a class="headerlink" href="#About-data-corrections" title="Permalink to this headline">¶</a></h3>
<p>There are two corrections applied to the Landsat data:</p>
<p><strong>NBAR</strong></p>
<p>NBAR stands for Nadir-corrected BRDF Adjusted Reflectance, where
<strong>BRDF</strong> stands for Bidirectional Reflectance Distribution Function. The
approach involves atmospheric correction to compute surface-leaving
radiance, and bi-directional reflectance modelling to remove the effects
of topography and angular variation in reflectance.</p>
<p><strong>NBAR-T</strong></p>
<p>Surface reflectance NBAR-T includes the terrain illumination reflectance
correction and has the same features of NBAR, along with some additional
features.</p>
<p>See more details about <a class="reference external" href="http://geoscienceaustralia.github.io/digitalearthau/data/data.html">Surface
Reflectance</a>.</p>
<p>Note that the nbar-t data inserts a missing value (-9999) into the
dataset to denote a terrain shadow. This should be converted to a NaN
value before using this data to avoid treating it as a valid value.</p>
</div>
<div class="section" id="About-the-bands">
<h3>About the bands<a class="headerlink" href="#About-the-bands" title="Permalink to this headline">¶</a></h3>
<p>The sensors on the Landsats are different and collect reflected radiance
in various spectral wavelengths. These are called bands, and are used
when we plot a scene. Details about the bands for each satellite can be
found at [<a class="reference external" href="https://landsat.usgs.gov/landsat-5-history">Landsat 5</a>],
[<a class="reference external" href="https://landsat.usgs.gov/landsat-7-history">Landsat 7</a>] and
[<a class="reference external" href="https://landsat.usgs.gov/landsat-8-mission">Landsat 8</a>]. We do
not provide in the datacube data from all bands. The ones we provide are
listed below.</p>
<ul class="simple">
<li><strong>Landsat 5:</strong><ul>
<li>We only provide the Thematic Mapper (TM) sensor<ul>
<li>We don’t include the Thermal band in above, or the
Multispectral Scanner (MSS)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Landsat 7:</strong><ul>
<li>We provide the Enhanced Thematic Mapper Plus (ETM+) bands<ul>
<li>We don’t include the Thermal band or panchromatic band in the
above</li>
</ul>
</li>
</ul>
</li>
<li><strong>Landsat 8:</strong><ul>
<li>We provide the Operational Land Imager (OLI) bands<ul>
<li>We don’t include the panchromatic or cirrus bands</li>
</ul>
</li>
<li>We don’t include the Thermal Infrared Sensor (TIRS) bands</li>
</ul>
</li>
</ul>
<p>In all cases, we produce our products as 25m, while USGS produces 30m
(the actual data is somewhere in between).</p>
<p>The list of bands are given below. The band names to be used in code,
when retrieving the data, are given in brackets.</p>
<ul class="simple">
<li><strong>Landsats 5 and 7:</strong><ul>
<li>For Landsat 5 and 7 the bands are as follows:<ul>
<li>Band 1: blue (blue)</li>
<li>Band 2: green (green)</li>
<li>Band 3: red (red)</li>
<li>Band 4: near-infrared (nir)</li>
<li>Band 5: shortwave infrared 1 (swir1)</li>
<li>Band 7: shortwave infrared 2 (swir2)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Landsat 8:</strong><ul>
<li>For Landsat 8 there is an extra band above the blue band, and the
numbering shifts up by one for the rest.<ul>
<li>Band 1: coastal aerosol (coastal_aerosol)</li>
<li>Band 2: blue (blue)</li>
<li>Band 3: green (green), and so on.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="How-to-retrieve-and-plot-the-data">
<h2>How to retrieve and plot the data<a class="headerlink" href="#How-to-retrieve-and-plot-the-data" title="Permalink to this headline">¶</a></h2>
<p>Let us go through the process step by step. This is a Python program or
a HTML page derived from one.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [105]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">datacube</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="k">import</span> <span class="n">exposure</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<div class="section" id="See-what-products-are-currently-available">
<h3>See what products are currently available<a class="headerlink" href="#See-what-products-are-currently-available" title="Permalink to this headline">¶</a></h3>
<p>The <strong>list_products</strong> method in the Datacube class displays the names
and details of all available products. A product may be defined as the
data collected by a particular satellite and reformatted. For example,
<strong>ls7_nbar_albers</strong>, is a set of data collected by the Landsat 7 as
per the Australian Albers projected coordinate system, and the NBAR data
correction applied.</p>
<p>Given below are the products that are of interest to us in the context
of this document. The code given below the list will let you see ALL
products in the datacube.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="27%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">id</th>
<th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>6</td>
<td>ls5_nbar_albers</td>
<td>Landsat 5 Surface Reflectance NBAR 25 metre, 1…</td>
</tr>
<tr class="row-odd"><td>21</td>
<td>ls7_nbar_albers</td>
<td>Landsat 7 Surface Reflectance NBAR 25 metre, 1…</td>
</tr>
<tr class="row-even"><td>19</td>
<td>ls8_nbar_albers</td>
<td>Landsat 8 Surface Reflectance NBAR 25 metre, 1…</td>
</tr>
<tr class="row-odd"><td>26</td>
<td>ls5_nbart_albers</td>
<td>Landsat 5 Surface Reflectance NBART 25 metre, …</td>
</tr>
<tr class="row-even"><td>29</td>
<td>ls7_nbart_albers</td>
<td>Landsat 7 Surface Reflectance NBART 25 metre, …</td>
</tr>
<tr class="row-odd"><td>28</td>
<td>ls8_nbart_albers</td>
<td>Landsat 8 Surface Relfectance NBART 25 metre, …</td>
</tr>
</tbody>
</table>
<div class="section" id="Code-to-display-the-products">
<h4>Code to display the products<a class="headerlink" href="#Code-to-display-the-products" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [106]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dc</span> <span class="o">=</span> <span class="n">datacube</span><span class="o">.</span><span class="n">Datacube</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="s1">&#39;dc-metadata&#39;</span><span class="p">)</span>
<span class="n">products</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">list_products</span><span class="p">()</span>
<span class="n">display_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
<span class="n">display_rows</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">dc_products</span> <span class="o">=</span> <span class="n">products</span><span class="p">[</span><span class="n">display_columns</span><span class="p">]</span>
<span class="c1">#dc_products # Activate this line to see all products</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Specify-the-query-with-the-coordinates-and-date-range">
<h3>Specify the <em>query</em> with the coordinates and date range<a class="headerlink" href="#Specify-the-query-with-the-coordinates-and-date-range" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>lat/lon:</strong> Latitude and longitude of the area. e.g. Canberra =
‘lat’: (-35.25, -35.35), ‘lon’: (149.05, 149.17)</li>
<li><strong>time:</strong> Date range to fetch the scenes. The approximate time
between two scenes is 16 days. If there is a location near a swath
boundary, it may be captured in two passes and so there could be two
images within the 16 day period.<ul>
<li>You must know <a class="reference external" href="https://data.dea.gadevs.ga/ls7_nbar_scene">the date(s) for which data is
available</a> for each
satellite/product, so that the query can be specified correctly.</li>
</ul>
</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [107]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">35.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">35.35</span><span class="p">),</span>
        <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">149.05</span><span class="p">,</span> <span class="mf">149.17</span><span class="p">),</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-01-15&#39;</span><span class="p">)</span>
        <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Now-we-actually-load-and-look-at-some-data">
<h3>Now we actually load and look at some data<a class="headerlink" href="#Now-we-actually-load-and-look-at-some-data" title="Permalink to this headline">¶</a></h3>
<p>We will focus on data from the Landsats (5,7 and 8) for this
demonstration. Sometimes multiple scenes are acquired by the satellite
on the same day. We want to group these together, and will use
<strong>group_by=’solar_day’</strong> to do this. To load in the data, we need only
to provide the geo-coordinates and time range.</p>
</div>
<div class="section" id="Create-a-data-scene-object">
<h3>Create a data scene object<a class="headerlink" href="#Create-a-data-scene-object" title="Permalink to this headline">¶</a></h3>
<p>The return value from the load command below is an <strong>xarray</strong> object,
which has two core data structures:</p>
<ul class="simple">
<li><strong>DataArray</strong> is a labeled, N-dimensional array.</li>
<li><strong>Dataset</strong> is a multi-dimensional, in-memory array database. It is a
dict-like container of DataArray objects aligned along any number of
shared dimensions, and serves a similar purpose in xarray to the
<strong>pandas.DataFrame</strong>.</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [108]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">product</span><span class="o">=</span><span class="s1">&#39;ls8_nbar_albers&#39;</span><span class="p">,</span> <span class="n">group_by</span><span class="o">=</span><span class="s1">&#39;solar_day&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">query</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[108]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;xarray.Dataset&gt;
Dimensions:          (time: 2, x: 492, y: 500)
Coordinates:
  * time             (time) datetime64[ns] 2017-01-07T23:50:29 ...
  * y                (y) float64 -3.953e+06 -3.953e+06 -3.953e+06 -3.953e+06 ...
  * x                (x) float64 1.542e+06 1.542e+06 1.542e+06 1.542e+06 ...
Data variables:
    coastal_aerosol  (time, y, x) int16 1491 1547 1622 1593 1577 1570 1560 ...
    blue             (time, y, x) int16 1380 1394 1492 1479 1455 1438 1407 ...
    green            (time, y, x) int16 1469 1506 1515 1503 1501 1535 1564 ...
    red              (time, y, x) int16 1458 1509 1521 1507 1502 1514 1532 ...
    nir              (time, y, x) int16 2190 2242 2278 2283 2251 2241 2299 ...
    swir1            (time, y, x) int16 1294 1266 1257 1267 1285 1322 1337 ...
    swir2            (time, y, x) int16 1076 1064 1059 1055 1065 1096 1113 ...
Attributes:
    crs:      EPSG:3577
</pre></div>
</div>
</div>
</div>
<div class="section" id="Function-to-plot-one-image-from-the-data">
<h3>Function to plot one image from the data<a class="headerlink" href="#Function-to-plot-one-image-from-the-data" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [109]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Last modified: April 2018</span>
<span class="sd">    Author: Mike Barnes</span>
<span class="sd">    Modified by: Claire Krause, Cate Kooymans, Robbi Bishop-Taylor, Sivaprasad Arapaut</span>

<span class="sd">Parameters for three_band_image():</span>

<span class="sd">Inputs:</span>

<span class="sd">    ds - dataset containing the bands to be plotted</span>
<span class="sd">    bands - list of three bands to be plotted</span>

<span class="sd">Optional:</span>

<span class="sd">    time - Index value of the time dimension of ds to be plotted.</span>
<span class="sd">        This index refers to the scenes captured, depending on your date range.</span>
<span class="sd">    figsize - dimensions for the output figure.</span>
<span class="sd">    contrast_enhance - determines the transformation for plotting onto RGB. If contrast_enhance = true, exposure.equalize_hist is used to transform the data. Else, the data are standardised relative to reflectance = 5000.</span>
<span class="sd">    title - string for the plot title. If nothing is given, it will print the names of the bands being plotted.</span>
<span class="sd">    projection - options are &#39;projected&#39; or &#39;geographic&#39;; determines if the image is in degrees or northings.</span>
<span class="sd">        The terms easting and northing are geographic Cartesian coordinates for a point. Easting refers to the eastward-measured distance (or the x-coordinate), while northing refers to the northward-measured distance (or the y-coordinate). Easting and northing coordinates are commonly measured in metres from the axes of some horizontal datum.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">three_band_image</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">contrast_enhance</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Plot&#39;</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;projected&#39;</span><span class="p">):</span>

    <span class="c1"># Get the number of scenes and the number of x and y coordinates</span>
    <span class="n">t</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">bands</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">shape</span>

    <span class="c1"># Initialise a numpy.ndarray class object with 0&#39;s</span>
    <span class="n">rawimg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

    <span class="c1"># Populate the rawimg array with actual values. These are taken from all specified bands</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">colour</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>
        <span class="n">rawimg</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">colour</span><span class="p">][</span><span class="n">time</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

    <span class="c1"># If any value is recorded as -999, then change it to a NaN to make it an invalid data point</span>
    <span class="n">rawimg</span><span class="p">[</span><span class="n">rawimg</span> <span class="o">==</span> <span class="o">-</span><span class="mi">999</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

    <span class="c1"># Enhance the picture quality by applying &#39;histogram_equalisation&#39;</span>
    <span class="k">if</span> <span class="n">contrast_enhance</span><span class="p">:</span>
        <span class="n">img_toshow</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">equalize_hist</span><span class="p">(</span><span class="n">rawimg</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">rawimg</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">img_toshow</span> <span class="o">=</span> <span class="n">rawimg</span> <span class="o">/</span> <span class="mi">5000</span>

    <span class="c1"># Plot the data</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_toshow</span><span class="p">)</span>

    <span class="c1"># Build the X and Y axes</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="n">time</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Eastings&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Northings&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Plot-an-image">
<h3>Plot an image<a class="headerlink" href="#Plot-an-image" title="Permalink to this headline">¶</a></h3>
<p>The code blocks given below will plot a scene, specified as <strong>time =
1</strong>. Must remember that the index starts at 0 and if there is only one
scene in the data, like what happens when the date range is less than
~16 days, you cannot display the second scene. In that case, <strong>time =
0</strong> must be given.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [110]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">three_band_image</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;nir&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">],</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_22_0.png" src="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_22_0.png" />
</div>
</div>
</div>
<div class="section" id="Plot-this-scene-up-as-true-colour-image">
<h3>Plot this scene up as true colour image<a class="headerlink" href="#Plot-this-scene-up-as-true-colour-image" title="Permalink to this headline">¶</a></h3>
<p>True colour images approximate what the human eye sees when looking at a
landscape. Note that the function used for this true colour plot
enhances the contrast between the bands, specified as
<strong>contrast_enhance=True</strong>, resulting in a colour-enhanced image.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [111]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">three_band_image</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">],</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_24_0.png" src="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_24_0.png" />
</div>
</div>
</div>
<div class="section" id="Plot-this-scene-up-as-false-colour-image">
<h3>Plot this scene up as false colour image<a class="headerlink" href="#Plot-this-scene-up-as-false-colour-image" title="Permalink to this headline">¶</a></h3>
<p>This plot uses the SWIR and NIR bands to accentuate the presence of
water in the landscape.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [112]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">three_band_image</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;swir1&#39;</span><span class="p">,</span><span class="s1">&#39;nir&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">],</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_26_0.png" src="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_26_0.png" />
</div>
</div>
</div>
<div class="section" id="Function-to-plot-multiple-images-side-by-side">
<h3>Function to plot multiple images side by side<a class="headerlink" href="#Function-to-plot-multiple-images-side-by-side" title="Permalink to this headline">¶</a></h3>
<p>If there are more than one scene in the data, they can be plotted in a
grid as shown below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [113]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Last modified: March 2018</span>
<span class="sd">    Author: Mike Barnes</span>
<span class="sd">    Modified by: Claire Krause, Robbi Bishop-Taylor, Sivaprasad Arapaut</span>

<span class="sd">Parameters for three_band_image_subplots():</span>

<span class="sd">Inputs:</span>

<span class="sd">    ds - dataset containing the bands to be plotted</span>
<span class="sd">    bands - list of three bands to be plotted</span>
<span class="sd">    num_cols - number of columns for the subplot</span>

<span class="sd">Optional:</span>

<span class="sd">    contrast_enhance - determines the transformation for plotting onto RGB. If contrast_enhance = true, exposure.equalize_hist is used to transform the data. Else, the data are standardised relative to reflectance = 5000</span>
<span class="sd">    figsize - dimensions for the output figure</span>
<span class="sd">    projection - options are &#39;projected&#39; or &#39;geographic&#39;; determines if image is in degrees or northings</span>
<span class="sd">    left - the space on the left side of the subplots of the figure</span>
<span class="sd">    right - the space on the right side of the subplots of the figure</span>
<span class="sd">    bottom - the space on the bottom of the subplots of the figure</span>
<span class="sd">    top - the space on the top of the subplots of the figure</span>
<span class="sd">    wspace - the amount of width reserved for blank space between subplots</span>
<span class="sd">    hspace - the amount of height reserved for white space between subplots</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">def</span> <span class="nf">three_band_image_subplots</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">,</span> <span class="n">contrast_enhance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="n">projection</span><span class="o">=</span><span class="s1">&#39;projected&#39;</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">):</span>

    <span class="c1"># Find the number of rows/columns we need, based on the number of time steps in ds</span>
    <span class="n">timesteps</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">size</span>
    <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">timesteps</span> <span class="o">/</span> <span class="n">num_cols</span><span class="p">))</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">right</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">top</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="n">wspace</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="n">hspace</span><span class="p">)</span>
    <span class="n">numbers</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>

        <span class="c1"># Get the number of scenes (same as timesteps) and the number of x and y coordinates</span>
        <span class="n">t</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">bands</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">shape</span>

        <span class="c1"># Initialise a numpy.ndarray class object with 0&#39;s</span>
        <span class="n">rawimg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="c1"># Populate the rawimg array with actual values. These are taken from all specified bands</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">colour</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bands</span><span class="p">):</span>

            <span class="c1"># If there is an empty plot(s) on the last row, as happens if &quot;num_cols * num_rows != timesteps&quot;,</span>
            <span class="c1"># the statement below will give an error. Hence, the try/except switch is important</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rawimg</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">colour</span><span class="p">][</span><span class="n">numbers</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># If any value is recorded as -999, then change it to a NaN to make it an invalid data point</span>
        <span class="n">rawimg</span><span class="p">[</span><span class="n">rawimg</span> <span class="o">==</span> <span class="o">-</span><span class="mi">999</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="c1"># Enhance the picture quality by applying &#39;histogram_equalisation&#39;</span>
        <span class="k">if</span> <span class="n">contrast_enhance</span><span class="p">:</span>
            <span class="n">img_toshow</span> <span class="o">=</span> <span class="n">exposure</span><span class="o">.</span><span class="n">equalize_hist</span><span class="p">(</span><span class="n">rawimg</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">rawimg</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Here, we are just reducing the numbers to between 0 and 2, as the maximum value is 10,000.</span>
            <span class="c1"># It is a figure arrived at by trial and error to display a better image.</span>
            <span class="c1"># It works well for False Colour, but not so much for RGB</span>
            <span class="n">img_toshow</span> <span class="o">=</span> <span class="n">rawimg</span> <span class="o">/</span> <span class="mi">5000</span>

        <span class="c1"># If there is an empty plot(s) on the last row, as happens if &quot;num_cols * num_rows != timesteps&quot;,</span>
        <span class="c1"># the statement below will give an error. Hence, the try/except switch is important</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># Plot the data</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_toshow</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="n">numbers</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">projection</span> <span class="o">==</span> <span class="s1">&#39;geographic&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Eastings&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Northings&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">numbers</span> <span class="o">=</span> <span class="n">numbers</span> <span class="o">+</span> <span class="mi">1</span>

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [114]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">three_band_image_subplots</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;swir1&#39;</span><span class="p">,</span><span class="s1">&#39;nir&#39;</span><span class="p">,</span><span class="s1">&#39;green&#39;</span><span class="p">],</span> <span class="n">num_cols</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">wspace</span> <span class="o">=</span> <span class="mf">0.35</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="stderr output_area docutils container">
<div class="highlight"><pre>
Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).
Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_29_1.png" src="../../_images/notebooks_DEA_datasets_GettingStartedWithLandSats5-7-8_29_1.png" />
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Landsats5-7-8-PQ.html" class="btn btn-neutral float-right" title="View Landsat 8 Imagery with PQ mask" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="GettingStartedWithITEM.html" class="btn btn-neutral" title="Getting started with the Intertidal Extents Relative Model and ITEM Confidence (ITEM v2.0)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Geoscience Australia.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


<!-- Theme Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113800428-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 
 gtag('config', 'UA-113800428-1');
</script>

    
  


</body>
</html>